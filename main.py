import streamlit as st

# ===============================
# í˜ì´ì§€ ì„¤ì •
# ===============================
st.set_page_config(
    page_title="ğŸ¦‹ ë¹„ë§Œì¹˜ë£Œì œì˜ ë‚˜ë¹„íš¨ê³¼",
    layout="wide"
)

# ===============================
# ì œëª©
# ===============================
st.title("ğŸ¦‹ ë¹„ë§Œì¹˜ë£Œì œì˜ ë‚˜ë¹„íš¨ê³¼")
st.write("ğŸ’Š **ìœ„ê³ ë¹„ Â· ì‚­ì„¼ë‹¤ Â· ë§ˆìš´ìë¡œ Â· ì˜¤ì ¬í”½**")
st.write("â¡ï¸ ì²´ì¤‘ ê°ì†Œë¼ëŠ” ì‘ì€ ë³€í™”ê°€ ì‚¬íšŒ ì „ì²´ë¡œ í¼ì§€ëŠ” ê³¼ì •ì„ ì‚´í´ë³¸ë‹¤")

# ===============================
# ì•½ë¬¼ ì„ íƒ
# ===============================
drug = st.selectbox(
    "ğŸ’‰ ë¹„ë§Œì¹˜ë£Œì œë¥¼ ì„ íƒí•˜ì„¸ìš”",
    ["ìœ„ê³ ë¹„ (Wegovy)", "ì‚­ì„¼ë‹¤ (Saxenda)", "ë§ˆìš´ìë¡œ (Mounjaro)", "ì˜¤ì ¬í”½ (Ozempic)"]
)

drug_info = {
    "ìœ„ê³ ë¹„ (Wegovy)": "ğŸŸ¢ ì£¼ 1íšŒ íˆ¬ì—¬ | ê°•ë ¥í•œ ì²´ì¤‘ ê°ì†Œ | ë¹„ë§Œ ì¹˜ë£Œ íŠ¹í™”",
    "ì‚­ì„¼ë‹¤ (Saxenda)": "ğŸŸ¡ ë§¤ì¼ íˆ¬ì—¬ | GLP-1 ì´ˆê¸° ë¹„ë§Œì¹˜ë£Œì œ",
    "ë§ˆìš´ìë¡œ (Mounjaro)": "ğŸ”µ GLP-1 + GIP ì´ì¤‘ ì‘ìš© | ìµœëŒ€ ì²´ì¤‘ ê°ì†Œ íš¨ê³¼",
    "ì˜¤ì ¬í”½ (Ozempic)": "ğŸŸ£ ë‹¹ë‡¨ ì¹˜ë£Œì œì—ì„œ ë¹„ë§Œ ì¹˜ë£Œë¡œ í™•ì¥"
}

st.success("ğŸ“Œ ì„ íƒí•œ ì•½ë¬¼ íŠ¹ì§•\n\n" + drug_info[drug])

# ===============================
# ë‚˜ë¹„íš¨ê³¼ êµ¬ì¡°
# ===============================
st.subheader("ğŸ”„ ë¹„ë§Œì¹˜ë£Œì œì˜ ë‚˜ë¹„íš¨ê³¼")

col1, col2, col3, col4 = st.columns(4)

with col1:
    st.markdown("### ğŸ‘¤ ê°œì¸")
    st.write("ğŸ½ï¸ ì‹ìš• ê°ì†Œ")
    st.write("âš–ï¸ ì²´ì¤‘ ê°ì†Œ")
    st.write("ğŸ§¬ ëŒ€ì‚¬ ê¸°ëŠ¥ ê°œì„ ")
    st.write("ğŸ˜„ ì‚¶ì˜ ì§ˆ ìƒìŠ¹")

with col2:
    st.markdown("### ğŸ¥ ì˜ë£Œ")
    st.write("â¤ï¸ ì‹¬í˜ˆê´€ ì§ˆí™˜ ê°ì†Œ")
    st.write("ğŸ©º ë‹¹ë‡¨Â·ê³ í˜ˆì•• ê°œì„ ")
    st.write("ğŸ’¸ ì˜ë£Œë¹„ ì ˆê°")
    st.write("ğŸ›¡ï¸ ì˜ˆë°©ì˜í•™ ê°•í™”")

with col3:
    st.markdown("### ğŸ­ ì‚°ì—…")
    st.write("ğŸ¥— ì‹í’ˆ ì‚°ì—… ë³€í™”")
    st.write("ğŸ’Š ì œì•½Â·ë°”ì´ì˜¤ ì„±ì¥")
    st.write("ğŸ‹ï¸ í—¬ìŠ¤ì¥ ì´ìš© ê°ì†Œ")
    st.write("ğŸ“‰ ë¹„ë§Œ ê´€ë ¨ ì‹œì¥ ì¶•ì†Œ")

with col4:
    st.markdown("### ğŸŒ ì‚¬íšŒ")
    st.write("ğŸ‘€ ë¹„ë§Œ ì¸ì‹ ë³€í™”")
    st.write("âš™ï¸ ë…¸ë™ ìƒì‚°ì„± ì¦ê°€")
    st.write("ğŸ“‰ ì‚¬íšŒì  ë¹„ìš© ê°ì†Œ")
    st.write("ğŸ“Š ê³µì¤‘ë³´ê±´ êµ¬ì¡° ë³€í™”")

# ===============================
# í•œ ì¤„ ìš”ì•½
# ===============================
st.subheader("ğŸ§  í•œ ì¤„ ìš”ì•½")

st.info(
    "ğŸ¦‹ ë¹„ë§Œì¹˜ë£Œì œëŠ” ë‹¨ìˆœí•œ ë‹¤ì´ì–´íŠ¸ ì•½ì´ ì•„ë‹ˆë¼, "
    "ê°œì¸ì˜ ìƒë¦¬ ë³€í™”ê°€ ì˜ë£ŒÂ·ì‚°ì—…Â·ì‚¬íšŒ êµ¬ì¡° ì „ì²´ë¡œ í™•ì¥ë˜ëŠ” "
    "ëŒ€í‘œì ì¸ ë‚˜ë¹„íš¨ê³¼ ì‚¬ë¡€ì´ë‹¤."
)


import streamlit as st
import matplotlib.pyplot as plt
import numpy as np

# ===============================
# í˜ì´ì§€ ì„¤ì •
# ===============================
st.set_page_config(
    page_title="ğŸ¦‹ ë¹„ë§Œì¹˜ë£Œì œì˜ ë‚˜ë¹„íš¨ê³¼",
    layout="wide"
)

# ===============================
# ì œëª©
# ===============================
st.title("ğŸ¦‹ ë¹„ë§Œì¹˜ë£Œì œì˜ ë‚˜ë¹„íš¨ê³¼")
st.write("ğŸ’Š **ìœ„ê³ ë¹„ Â· ì‚­ì„¼ë‹¤ Â· ë§ˆìš´ìë¡œ Â· ì˜¤ì ¬í”½**")
st.write("â¡ï¸ ì²´ì¤‘ ê°ì†Œë¼ëŠ” ì‘ì€ ìƒë¬¼í•™ì  ë³€í™”ê°€ ì‚¬íšŒ ì „ì²´ë¡œ í™•ì‚°ë˜ëŠ” ê³¼ì •ì„ ìˆ˜í•™ì ìœ¼ë¡œ íƒêµ¬í•œë‹¤")

# ===============================
# ì•½ë¬¼ ì„ íƒ
# ===============================
drug = st.selectbox(
    "ğŸ’‰ ë¹„ë§Œì¹˜ë£Œì œë¥¼ ì„ íƒí•˜ì„¸ìš”",
    ["ìœ„ê³ ë¹„ (Wegovy)", "ì‚­ì„¼ë‹¤ (Saxenda)", "ë§ˆìš´ìë¡œ (Mounjaro)", "ì˜¤ì ¬í”½ (Ozempic)"]
)

drug_info = {
    "ìœ„ê³ ë¹„ (Wegovy)": "ğŸŸ¢ ì£¼ 1íšŒ | ì²´ì¤‘ ê°ì†Œ ì¤‘ì‹¬",
    "ì‚­ì„¼ë‹¤ (Saxenda)": "ğŸŸ¡ ë§¤ì¼ íˆ¬ì—¬ | GLP-1 ì´ˆê¸° ëª¨ë¸",
    "ë§ˆìš´ìë¡œ (Mounjaro)": "ğŸ”µ GLP-1 + GIP | ìµœëŒ€ ì²´ì¤‘ ê°ì†Œ",
    "ì˜¤ì ¬í”½ (Ozempic)": "ğŸŸ£ ë‹¹ë‡¨ â†’ ë¹„ë§Œ ì¹˜ë£Œ í™•ì¥"
}

st.success("ğŸ“Œ ì„ íƒ ì•½ë¬¼ íŠ¹ì§•: " + drug_info[drug])

# ===============================
# ì²´ì¤‘ ê°ì†Œ ìŠ¬ë¼ì´ë”
# ===============================
st.subheader("ğŸšï¸ ì²´ì¤‘ ê°ì†Œìœ¨ ì„¤ì •")

weight_loss = st.slider(
    "ì²´ì¤‘ ê°ì†Œìœ¨ (%)",
    min_value=5,
    max_value=30,
    value=15
)

st.write("âš–ï¸ ì„¤ì •ëœ ì²´ì¤‘ ê°ì†Œìœ¨:", weight_loss, "%")

# ===============================
# SIR ëª¨ë¸ (ë¹„ë§Œ ì¸êµ¬ ê°ì†Œ)
# ===============================
st.subheader("ğŸ§® ìˆ˜í•™ ëª¨ë¸ â‘  ë¹„ë§Œ ì¸êµ¬ ê°ì†Œ SIR ëª¨ë¸")

N = 1000
S = [800]
I = [200]
R = [0]

beta = 0.002 * weight_loss
gamma = 0.05

for _ in range(30):
    new_S = S[-1] - beta * S[-1] * I[-1]
    new_I = I[-1] + beta * S[-1] * I[-1] - gamma * I[-1]
    new_R = R[-1] + gamma * I[-1]
    S.append(new_S)
    I.append(new_I)
    R.append(new_R)

fig1, ax1 = plt.subplots()
ax1.plot(S, label="ğŸ§ ì •ìƒ ì²´ì¤‘")
ax1.plot(I, label="âš–ï¸ ë¹„ë§Œ")
ax1.plot(R, label="ğŸ’Š ì¹˜ë£Œ í›„")
ax1.set_title("ğŸ“‰ ë¹„ë§Œ ì¸êµ¬ ë³€í™” (SIR ëª¨ë¸)")
ax1.set_ylabel("ì¸êµ¬ ìˆ˜")
ax1.legend()
st.pyplot(fig1)

# ===============================
# íšŒê·€ ëª¨ë¸ (ì²´ì¤‘ ê°ì†Œ vs ì˜ë£Œë¹„)
# ===============================
st.subheader("ğŸ§® ìˆ˜í•™ ëª¨ë¸ â‘¡ íšŒê·€ ë¶„ì„")

x = np.array([5, 10, 15, 20, 25, 30])
y = np.array([95, 88, 80, 72, 65, 58])  # ì˜ë£Œë¹„ ì§€ìˆ˜

coef = np.polyfit(x, y, 1)
reg = np.poly1d(coef)

fig2, ax2 = plt.subplots()
ax2.scatter(x, y)
ax2.plot(x, reg(x))
ax2.set_title("ğŸ’¸ ì²´ì¤‘ ê°ì†Œìœ¨ vs ì˜ë£Œë¹„")
ax2.set_xlabel("ì²´ì¤‘ ê°ì†Œìœ¨ (%)")
ax2.set_ylabel("ì˜ë£Œë¹„ ì§€ìˆ˜")
st.pyplot(fig2)

st.write("ğŸ“‰ íšŒê·€ì‹: ì˜ë£Œë¹„ â‰ˆ", round(coef[0], 2), "Ã— ì²´ì¤‘ê°ì†Œìœ¨ +", round(coef[1], 2))

# ===============================
# ì˜ë£Œë¹„ Â· ì§ˆë³‘ ê°ì†Œ ê·¸ë˜í”„
# ===============================
st.subheader("ğŸ“Š ì˜ë£Œë¹„ Â· ì§ˆë³‘ ê°œì„  íš¨ê³¼")

years = ["í˜„ì¬", "1ë…„", "3ë…„", "5ë…„"]
medical_cost = [100, 90, 75, 60]
cardio = [100, 85, 70, 55]

fig3, ax3 = plt.subplots()
ax3.plot(years, medical_cost, marker="o", label="ğŸ’¸ ì˜ë£Œë¹„")
ax3.plot(years, cardio, marker="o", label="â¤ï¸ ì‹¬í˜ˆê´€ ì§ˆí™˜")
ax3.set_title("ğŸ“‰ ì¥ê¸° ê±´ê°• ì§€í‘œ ë³€í™”")
ax3.set_ylabel("ì§€ìˆ˜")
ax3.legend()
st.pyplot(fig3)

# ===============================
# GLP-1 ë©”ì»¤ë‹ˆì¦˜ ì¸í„°ë™ì…˜
# ===============================
st.subheader("ğŸ§  GLP-1 ì‘ìš© ë©”ì»¤ë‹ˆì¦˜")

option = st.radio(
    "ğŸ” ì‘ìš© ë‹¨ê³„ë¥¼ ì„ íƒí•˜ì„¸ìš”",
    ["ğŸ§  ë‡Œ", "ğŸ½ï¸ ìœ„", "ğŸ©¸ í˜ˆë‹¹", "â¤ï¸ ì‹¬í˜ˆê´€"]
)

if option == "ğŸ§  ë‡Œ":
    st.info("GLP-1ì€ ì‹œìƒí•˜ë¶€ì— ì‘ìš©í•´ í¬ë§Œê°ì„ ì¦ê°€ì‹œí‚¤ê³  ì‹ìš•ì„ ì–µì œí•œë‹¤")
elif option == "ğŸ½ï¸ ìœ„":
    st.info("ìœ„ ë°°ì¶œ ì†ë„ë¥¼ ëŠ¦ì¶° ì ì€ ìŒì‹ì—ë„ ì˜¤ë˜ í¬ë§Œê°ì„ ìœ ì§€í•œë‹¤")
elif option == "ğŸ©¸ í˜ˆë‹¹":
    st.info("ì¸ìŠë¦° ë¶„ë¹„ë¥¼ ì´‰ì§„í•´ í˜ˆë‹¹ ìŠ¤íŒŒì´í¬ë¥¼ ì–µì œí•œë‹¤")
else:
    st.info("ì²´ì¤‘ ê°ì†Œì™€ ëŒ€ì‚¬ ê°œì„ ì€ ì‹¬í˜ˆê´€ ì§ˆí™˜ ìœ„í—˜ì„ í¬ê²Œ ë‚®ì¶˜ë‹¤")





